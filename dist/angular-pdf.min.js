<<<<<<< HEAD
// /*! Angular-PDF Version: 1.3.0 | Released under an MIT license */
(function(){'use strict';angular.module('pdf',[]).directive('ngPdf',['$window',function($window){var renderTask=null;var pdfLoaderTask=null;var debug=false;var backingScale=function(canvas){var ctx=canvas.getContext('2d');var dpr=window.devicePixelRatio||1;var bsr=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;return dpr/bsr;};var setCanvasDimensions=function(canvas,w,h){var ratio=backingScale(canvas);canvas.width=Math.floor(w*ratio);canvas.height=Math.floor(h*ratio);canvas.style.width=Math.floor(w)+'px';canvas.style.height=Math.floor(h)+'px';canvas.getContext('2d').setTransform(ratio,0,0,ratio,0,0);return canvas;};return{restrict:'E',templateUrl:function(element,attr){return attr.templateUrl?attr.templateUrl:'partials/viewer.html';},link:function(scope,element,attrs){element.css('display','block');var url=attrs.pdfUrl?attrs.pdfUrl:scope.pdfUrl;var topOffset=attrs.topOffset?attrs.topOffset:scope.topOffset;var bottomOffset=attrs.bottomOffset?attrs.bottomOffset:scope.bottomOffset;var offsetTop=isFinite(topOffset)?parseInt(topOffset):0;var offsetBottom=isFinite(bottomOffset)?parseInt(bottomOffset):0;var httpHeaders=scope.httpHeaders;var pdfDoc=null;var pageToDisplay=isFinite(attrs.page)?parseInt(attrs.page):1;var pageFit=attrs.scale==='page-fit';var pageFitW=attrs.scale==='page-width';var pageFitH=attrs.scale==='page-height';var scale=attrs.scale>0?attrs.scale:1;var canvasid=attrs.canvasid||'pdf-canvas';var canvas=document.getElementById(canvasid);debug=attrs.hasOwnProperty('debug')?attrs.debug:false;var creds=attrs.usecredentials;var ctx=canvas.getContext('2d');var windowEl=angular.element($window);windowEl.on('scroll',function(){scope.$apply(function(){scope.scroll=windowEl[0].scrollY;scope.scroll=windowEl[0].scrollX;});});PDFJS.disableWorker=true;scope.pageNum=pageToDisplay;scope.renderPage=function(num){if(renderTask){renderTask._internalRenderTask.cancel();};pdfDoc.getPage(num).then(function(page){var renderContext;var viewport=page.getViewport(1);var clientRect=element[0].getBoundingClientRect();if(debug)console.log("Offset Top: "+offsetTop);if(debug)console.log("Offset Bottom: "+offsetBottom);var windowHeight=$window.innerHeight;if(debug)console.log("Window Height: "+windowHeight);var clientRectHeight=windowHeight-offsetTop-offsetBottom;if(debug)console.log("Computed Height: "+clientRectHeight);var pageWidthScale=clientRect.width/viewport.width;if(debug)console.log("Page Width Scale: "+pageWidthScale);var pageHeightScale=clientRectHeight/viewport.height;if(debug)console.log("Page Height Scale: "+pageHeightScale);if(pageFit){scale=Math.min(pageWidthScale,pageHeightScale);};if(pageFitW){scale=pageWidthScale;};if(pageFitH){scale=pageHeightScale;};viewport=page.getViewport(scale);if(debug)console.log("Page Scale: "+scale);setCanvasDimensions(canvas,viewport.width,viewport.height);renderContext={canvasContext:ctx,viewport:viewport};renderTask=page.render(renderContext);renderTask.promise.then(function(){if(typeof scope.onPageRender==='function'){scope.onPageRender();};}).catch(function(reason){console.log(reason);});});};scope.goPrevious=function(){if(scope.pageToDisplay<=1){return;};scope.pageToDisplay=parseInt(scope.pageToDisplay)-1;scope.pageNum=scope.pageToDisplay;};scope.goNext=function(){if(scope.pageToDisplay>=pdfDoc.numPages){return;};scope.pageToDisplay=parseInt(scope.pageToDisplay)+1;scope.pageNum=scope.pageToDisplay;};scope.zoomIn=function(){pageFit=false;scale=parseFloat(scale)+0.2;scope.renderPage(scope.pageToDisplay);return scale;};scope.zoomOut=function(){pageFit=false;scale=parseFloat(scale)-0.2;scope.renderPage(scope.pageToDisplay);return scale;};scope.fit=function(){pageFit=true;scope.renderPage(scope.pageToDisplay);};scope.changePage=function(){scope.renderPage(scope.pageToDisplay);};scope.rotate=function(){if(canvas.getAttribute('class')==='rotate0'){canvas.setAttribute('class','rotate90');}else if(canvas.getAttribute('class')==='rotate90'){canvas.setAttribute('class','rotate180');}else if(canvas.getAttribute('class')==='rotate180'){canvas.setAttribute('class','rotate270');}else{canvas.setAttribute('class','rotate0');};};function clearCanvas(){if(ctx){ctx.clearRect(0,0,canvas.width,canvas.height);};};function renderPDF(){clearCanvas();var params={'url':url,'withCredentials':creds};if(httpHeaders){params.httpHeaders=httpHeaders;};if(url&&url.length){pdfLoaderTask=PDFJS.getDocument(params,null,null,scope.onProgress);pdfLoaderTask.then(function(_pdfDoc){if(typeof scope.onLoad==='function'){scope.onLoad();};pdfDoc=_pdfDoc;scope.renderPage(scope.pageToDisplay);scope.$apply(function(){scope.pageCount=_pdfDoc.numPages;});},function(error){if(error){if(typeof scope.onError==='function'){scope.onError(error);}}});}};scope.$watch('pageNum',function(newVal){scope.pageToDisplay=parseInt(newVal);if(pdfDoc!==null){scope.renderPage(scope.pageToDisplay);};});scope.$watch('pdfUrl',function(newVal){if(newVal!==''){if(debug){console.log('pdfUrl value change detected: ',scope.pdfUrl);};url=newVal;scope.pageNum=scope.pageToDisplay=pageToDisplay;if(pdfLoaderTask){pdfLoaderTask.destroy().then(function(){renderPDF();});}else{renderPDF();}}});}};}]);})();
=======
/*!
 * Angular-PDF: An Angularjs directive <ng-pdf> to display PDF in the browser with PDFJS.
 * @version 2.0.0
 * @link https://github.com/sayanee/angular-pdf#readme
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define("pdf",["angular"],t):"object"==typeof exports?exports.pdf=t(require("angular")):e.pdf=t(e.angular)}(this,function(e){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="./src/angular-pdf.module.js")}({"./src/angular-pdf.directive.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NgPdf=["$window","$document","$log",function(e,t,n){"ngInject";var a=function(t){var n=t.getContext("2d");return(e.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)},r=function(e,t,n){var r=a(e);return e.width=Math.floor(t*r),e.height=Math.floor(n*r),e.style.width=Math.floor(t)+"px",e.style.height=Math.floor(n)+"px",e.getContext("2d").setTransform(r,0,0,r,0,0),e},o=function(e,t){angular.element(t).addClass("rotate0"),e.append(t)};return{restrict:"E",templateUrl:function(e,t){return t.templateUrl?t.templateUrl:"partials/viewer.html"},link:function(a,i,l){function u(){w&&w.clearRect(0,0,x.width,x.height)}function s(){u();var e={url:d,withCredentials:b};f&&(e.httpHeaders=f),d&&d.length&&(p=PDFJS.getDocument(e),p.onProgress=a.onProgress,p.onPassword=a.onPassword,p.then(function(e){angular.isFunction(a.onLoad)&&a.onLoad(),h=e,a.renderPage(a.pageToDisplay),a.$apply(function(){a.pageCount=e.numPages})},function(e){e&&angular.isFunction(a.onError)&&a.onError(e)}))}var c=null,p=null,g=!1,d=a.pdfUrl,f=a.httpHeaders,h=null,P=isFinite(l.page)?parseInt(l.page):1,m="page-fit"===l.scale,y="1"===l.limitcanvasheight,v=l.scale>0?l.scale:1,x=t[0].createElement("canvas");o(i,x);var b=l.usecredentials;g=!!l.hasOwnProperty("debug")&&l.debug;var w=x.getContext("2d"),D=angular.element(e);i.css("display","block"),D.on("scroll",function(){a.$apply(function(){a.scroll=D[0].scrollY})}),PDFJS.disableWorker=!0,a.pageNum=P,a.renderPage=function(e){c&&c._internalRenderTask.cancel(),h.getPage(e).then(function(e){var t=void 0,o=void 0,l=void 0;if(m){t=e.getViewport(1);var u=i[0].getBoundingClientRect();o=u.width/t.width,y&&(o=Math.min(o,u.height/t.height)),v=o}t=e.getViewport(v),r(x,t.width,t.height),l={canvasContext:w,viewport:t},c=e.render(l),c.promise.then(function(){angular.isFunction(a.onPageRender)&&a.onPageRender()}).catch(function(e){n.log(e)})})},a.goPrevious=function(){a.pageToDisplay<=1||(a.pageToDisplay=parseInt(a.pageToDisplay)-1,a.pageNum=a.pageToDisplay)},a.goNext=function(){a.pageToDisplay>=h.numPages||(a.pageToDisplay=parseInt(a.pageToDisplay)+1,a.pageNum=a.pageToDisplay)},a.zoomIn=function(){return m=!1,v=parseFloat(v)+.2,a.renderPage(a.pageToDisplay),v},a.zoomOut=function(){return m=!1,v=parseFloat(v)-.2,a.renderPage(a.pageToDisplay),v},a.fit=function(){m=!0,a.renderPage(a.pageToDisplay)},a.changePage=function(){a.renderPage(a.pageToDisplay)},a.rotate=function(){"rotate0"===x.getAttribute("class")?x.setAttribute("class","rotate90"):"rotate90"===x.getAttribute("class")?x.setAttribute("class","rotate180"):"rotate180"===x.getAttribute("class")?x.setAttribute("class","rotate270"):x.setAttribute("class","rotate0")},a.$watch("pageNum",function(e){a.pageToDisplay=parseInt(e),null!==h&&a.renderPage(a.pageToDisplay)}),a.$watch("pdfUrl",function(e){""!==e&&(g&&n.log("pdfUrl value change detected: ",a.pdfUrl),d=e,a.pageNum=a.pageToDisplay=P,p?p.destroy().then(function(){s()}):s())})}}}]},"./src/angular-pdf.module.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pdf=void 0;var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("./src/angular-pdf.directive.js"),i=t.Pdf=r.default.module("pdf",[]).directive("ngPdf",o.NgPdf).name;t.default=i},0:function(t,n){t.exports=e}})});
//# sourceMappingURL=angular-pdf.min.js.map
>>>>>>> sayanee/master
